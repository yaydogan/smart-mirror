<!DOCTYPE html>
<html ng-app="SmartMirror">
  <head>
    <meta charset="utf-8">
    <title>Smart Mirror</title>
    <!-- Libraries -->
    <script src="js/annyang.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular-animate.min.js"></script>
    <script src="https://code.responsivevoice.org/responsivevoice.js"></script>

    <!-- App -->
    <script src="config.js"></script>
    <script src="js/rrule.js"></script>
    <script src="js/app.js"></script>
    <script src="js/todo-service.js"></script>
    <script src="js/annyang-service.js"></script>
    <script src="js/weather-service.js"></script>
    <script src="js/xkcd-service.js"></script>
    <script src="js/map-service.js"></script>
    <script src="js/hue-service.js"></script>
    <script src="js/giphy-service.js"></script>
    <script src="js/geolocation-service.js"></script>
    <script src="js/calendar-service.js"></script>
    <script src="js/traffic-service.js"></script>
    <script src="js/controller.js"></script>
    <script src="js/rss-service.js"></script>

    <!-- Styles and Resources -->
    <link rel="shortcut icon" href="favicon.ico" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,800,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/weather-icons.css">

  </head>
  <body ng-controller="MirrorCtrl as commands">
    <div class="top">
      <div class="top-left">
        <div class="date small dimmed">{{date | date : 'EEEE, MMMM d yyyy'}}</div>
        <table class="time">
          <tr><td rowspan=4 cellpadding=0> {{date | date : 'hh:mm'}}</td></tr>
          <tr><td class="sec"> {{date | date : 'ss'}}</td></tr>		   
          <tr><td class="am_pm"> {{date | date : 'a'}}</td></tr>
        </table>
        <ul class="calendar fade" ng-show="focus == 'default' && showCalendar">
            <div class="header">Calendar</div>
            <li class="event" ng-repeat="event in calendar">
                <div class="event-details">
                    <span><i class="fa fa-calendar" style="margin-left:15px;font-size:20px";></i></span>
                    <span class="summary">{{event.SUMMARY}}</span>
                    <div ng-if="event.sameDayEvent==true"  class="details">{{event.start.format('dddd MMM Do, h:mm a')}} - {{event.end.format('h:mm a')}}</div>
                    <div ng-if="event.sameDayEvent==false" class="details">{{event.start.format('dddd MMM Do, h:mm a')}} - {{event.end.format('MMM Do, h:mm a')}}</div>
                </div>
            </li>
        </ul>
        <ul class="todo fade" ng-show="focus == 'default' && showTodo">
          <div class="header">Reminders</div>
          <li class="task" ng-repeat="task in todo">
            <div class="task-details">
              <span><i class="fa fa-bell-o" style="margin-left:15px; font-size:20px";></i></span>
              <span class="summary">{{task.dispId}}. {{task.summary}}</span>
              <div ng-if="task.dueDate != null" class="details">Due: {{task.dueDate}}</div>
            </div>
          </li>
        </ul>
      </div>

      <div class="top-right">
        <div class="weather">
          <div class="weather-today">
            <span class="icon wi {{currentForcast.wi}}"></span> 
            <span class="tempreture">{{currentForcast.temperature}}&deg;</span>
          </div>
 		  <div class="weather-week-descriptor">
			<span>{{hourlyForcast.summary}}</span>
			<span>{{weeklyForcast.summary}}</span>
		  </div>
          <div class="weather-week" ng-repeat="forcast in weeklyForcast.data" ng-if="$index > 0">
            <div class="weather-week-day">
              <span class="day light-grey">{{forcast.day}}</span>
              <span class="icon-small dimmed wi {{forcast.wi}}"></span>
              <span class="tempreture tempreture-min light-grey">{{forcast.temperatureMin}}&deg;</span>
              <span class="tempreture tempreture-max light-grey">{{forcast.temperatureMax}}&deg;</span>
            </div>
          </div>
        </div>
        <div class="traffic">
          <div ng-show="!traffic.error && showTraffic" class="traffic-information">
            <span class="time-to">Time to {{traffic.destination}}:</span>
            <span ng-show="traffic.hours > 0">{{traffic.hours}} hours and</span>
            <span>{{traffic.minutes}} minutes</span>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="middle-center">
        <h1 class="fade animate-grow" ng-show="focus == 'default'">{{greeting}}</h1>
        <h3 ng-show="!(user.name === undefined)">{{user.name}}</h3>

        <!-- <div class="listening" ng-show="listening">Ready: {{focus}}</div> -->
        <div class="contents-box map animate-grow" ng-show="focus == 'map'">
          <img class="contents map animate-grow" ng-src="{{map}}"/>
        </div>
        <div class="contents-box gif animate-grow" ng-show="focus == 'gif'">
          <img class="contents gif animate-grow" ng-src="{{gifimg}}"/>
        </div>
        <div class="xkcd-container animate-grow" ng-show="focus == 'comic'">
          <img class="xkcd animate-grow" ng-src="{{xkcd}}"/>
        </div>
        <div class="dilbert-container animate-grow" ng-show="focus == 'dilbert'">
          <img class="dilbert animate-grow" ng-src="{{dilbert.content}}"/>
          <div class="comic-title">{{dilbert.title}}</div>
        </div>

      </div>
      <div class="bottom-center">
        <!-- Command list -->
        <div class="commands animate-grow" ng-show="focus == 'commands'">
          <h2>Available Commands</h2>
          <dl>
            <dt>What can I say?</dt>
            <dd>Shows a list of voice commands available to you.</dd>
            <dt>Go home</dt>
            <dd>Takes you back to the home screen</dd>
            <dt>Show me ________</dt>
            <dd>Will show you pictures of the requested item.</dd>
            <dt>Remind me to ________</dt>
            <dd>Add something to the reminders list.</dd>
            <dt>Clear reminders</dt>
            <dd>Clears out your reminders list.</dd>
            <dt>Show map</dt>
            <dd>Shows a map of your current city.</dd>
            <dt>Show map of ________</dt>
            <dd>Shows a map of the given location.</dd>
            <dt>Show comic</dt>
            <dd>Shows the most recent xkcd comic.</dd>
            <dt>Giphy ________</dt>
            <dd>Shows a giphy image </dd>
          </dl>
          <small>
            We are using node <script>document.write(process.versions.node)</script>,
            Chrome <script>document.write(process.versions.chrome)</script>,
            and Electron <script>document.write(process.versions.electron)</script>.
          </small>
        </div>
        <div class="fade animate-grow" ng-show="focus == 'default' && shownews && news != null">
          <div class="news-title dimmed fade animate-grow">
            <span><i class="fa fa-rss fade animate-grow" style="margin-right: 5px";></i></span>
            <span fade animate-grow>Source: {{news.title}},   Last Updated: {{news.lastUpdated.format('MMM DD, h:mm a')}} </span>
          </div>
          <div class="news-content fade animate-grow">
            <span class="fade animate-grow">{{news.content}}</span>
          </div>
        </div>

        <div class="interim-result" ng-bind="interimResult"></div>
      </div>
      <div class="colors animate-grow" ng-show="focus == 'colors'">
        <div class="color-block" ng-repeat="color in colors" style="background-color:{{color}}"></div>
      </div>
    </div>
    <!-- Debug Buttons -->
    <div class="debug-info">
      <!--<button ng-click="debug = true">Open Debug</button>-->
    </div>
    <div class="debug-info" ng-show="debug == true">
      <button ng-click="focus = (focus == 'map')?'default':'map'">Map</button>
      <button ng-click="focus = (focus == 'colors')?'default':'colors'">Colors</button>
      <button ng-click="focus = (focus == 'commands')?'default':'commands'">Commands</button>
      <button ng-click="focus = (focus == 'gif')?'default':'gif'">Gif</button>
      <button ng-click="debug = false">Close Debug</button>
      <!-- Has results -->
      <div ng-show="commands.results.length > 0">
        <button class="btn btn-default" ng-click="commands.clearResults()">Clear</button>
        <hr/>
        <ul class="list-group">
          <li class="list-group-item" ng-repeat="result in commands.results">
            <span class="badge">{{ result.date | date : 'EEE MMM, yyyy hh:mm:ss a' }}</span>
            {{ result.content }}
          </li>
        </ul>
      </div>
    </div>
    <!-- Sleep cover -->
    <div ng-show="focus == 'sleep'" class="sleep-cover fade-slow"></div>
  </body>
</html>
